<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MatchMyVibe</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 50px;
    }

    .form-container {
      width: 300px;
      margin: auto;
    }

    .hidden {
      display: none;
    }

    input, button {
      display: block;
      width: 100%;
      margin-bottom: 15px;
      padding: 8px;
    }

    .toggle {
      text-align: center;
      cursor: pointer;
      color: blue;
    }

    .error {
      color: red;
    }

    .success {
      color: green;
    }
  </style>
</head>
<body>
  {% if request.session.get("email") %}
    <p>Welcome, {{ request.session['email'] }}!</p>
    <form action="/logout" method="get">
      <button type="submit">Logout</button>
    </form>
  {% endif %}

  <div class="form-container">
    <h2 id="form-title">Login</h2>

    {% if login_error %}
      <p class="error">{{ login_error }}</p>
    {% endif %}
    {% if signup_error %}
      <p class="error">{{ signup_error }}</p>
    {% endif %}
    {% if signup_success %}
      <p class="success">{{ signup_success }}</p>
    {% endif %}

    <!-- Login Form -->
    <form id="login-form" action="/login" method="post">
      <input type="email" name="email" placeholder="Email" required />
      <input type="password" name="password" placeholder="Password" required />
      <button type="submit">Log In</button>
    </form>

    <!-- Signup Form -->
    <form id="signup-form" class="hidden" action="/signup" method="post">
      <input type="text" name="name" placeholder="Full Name" required />
      <input type="email" name="email" placeholder="Email" required />
      <input type="password" name="password" placeholder="Password" required />
      <input type="date" name="dob" placeholder="Date of Birth" required />
      <button type="submit">Sign Up</button>
    </form>

    <p class="toggle" onclick="toggleForms()">Don't have an account? Sign up</p>
  </div>

  <script>
    const loginForm = document.getElementById("login-form");
    const signupForm = document.getElementById("signup-form");
    const toggleText = document.querySelector(".toggle");
    const formTitle = document.getElementById("form-title");

    function toggleForms() {
      loginForm.classList.toggle("hidden");
      signupForm.classList.toggle("hidden");

      const isLogin = !loginForm.classList.contains("hidden");
      toggleText.textContent = isLogin
        ? "Don't have an account? Sign up"
        : "Already have an account? Log in";

      formTitle.textContent = isLogin ? "Login" : "Sign Up";
    }
  </script>
</body>
</html>